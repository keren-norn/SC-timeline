/*
SC Timeline — app.css (version corrigée + thème “Star Citizen / HUD”)
- Palette teal/cyan
- Effet “glass”
- Trait lumineux sous le header
- Coins biseautés sur les cartes
- Modale plus haute + scroll interne
*/

/* ==============================
   1) Variables / theme
   ============================== */

:root{
  --bg:#050c10;
  --panel:#071b24;
  --panel2:#06141d;

  --text:#d9f4ff;
  --muted:#7fa5b7;
  --accent:#6fe4ff;

  --border:rgba(111, 228, 255, .20);
  --border2:rgba(255,255,255,.06);

  --glow:rgba(111, 228, 255, .22);
  --glow2:rgba(111, 228, 255, .12);

  --shadow: 0 18px 60px rgba(0,0,0,.55);
  --shadow2: 0 10px 30px rgba(0,0,0,.35);

  --radius:16px;
}

/* ==============================
   2) Reset / base
   ============================== */

*{ box-sizing:border-box; }
html, body{
  height:100%;
  width:100%;
  overflow-x:hidden;
}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background: none;
}
body::before{
  content:"";
  position: fixed;
  top:0; right:0; bottom:0; left:0;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(1200px 700px at 20% -10%, rgba(111,228,255,.10), transparent 60%),
    radial-gradient(900px 600px at 110% 10%, rgba(111,228,255,.06), transparent 55%),
    linear-gradient(180deg, #041018 0%, var(--bg) 55%, #04080b 100%);
}
a{ color:var(--accent); text-decoration:none; }
a:hover{ text-decoration:underline; }

/* ==============================
   3) Header
   ============================== */

header{
  position:sticky;
  top:0;
  z-index:50;
  background:linear-gradient(180deg, rgba(6,14,20,.88), rgba(6,14,20,.72));
  backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border);
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
header::after{
  content:"";
  display:block;
  height:1px;
  background:linear-gradient(90deg,
    transparent 0%,
    rgba(111,228,255,.15) 15%,
    rgba(111,228,255,.55) 50%,
    rgba(111,228,255,.15) 85%,
    transparent 100%);
  box-shadow:
    0 0 12px rgba(111,228,255,.22),
    0 0 26px rgba(111,228,255,.10);
}

.headerWrap{
  max-width:1200px;
  margin:0 auto;
  padding:14px 16px;
  display:flex;
  gap:12px;
  align-items:flex-start;
  justify-content:space-between;
}

.hTitle{
  margin:0;
  font-size:18px;
  font-weight:900;
  letter-spacing:.10em;
  text-transform:uppercase;
}

.hMeta{
  margin:6px 0 0;
  color:var(--muted);
  font-size:12px;
  line-height:1.35;
}

.hRight{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:flex-end;
}

/* ==============================
   4) Petits composants
   ============================== */

.pill{
  display:inline-flex;
  gap:8px;
  align-items:center;
  border:1px solid var(--border);
  padding:6px 10px;
  border-radius:999px;
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.03);
  color:var(--muted);
  font-size:12px;
  letter-spacing:.04em;
  text-transform:uppercase;
}

button{
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border2);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.015));
  color:var(--text);
  cursor:pointer;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
}
button:hover{
  border-color:var(--border);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.03),
    0 0 0 3px var(--glow2);
}
button.primary{
  border-color:rgba(111,228,255,.55);
  box-shadow:
    0 0 0 3px rgba(111,228,255,.14),
    inset 0 0 0 1px rgba(255,255,255,.03);
}
button:disabled{
  opacity:.5;
  cursor:not-allowed;
}

input,select,textarea{
  width:100%;
  padding:10px;
  border-radius:12px;
  border:1px solid var(--border2);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
  color:var(--text);
  outline:none;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
}
input:focus,select:focus,textarea:focus{
  border-color:var(--border);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.03),
    0 0 0 3px var(--glow2);
}
textarea{ min-height:140px; resize:vertical; }

/* ==============================
   Select stylisé
   ============================== */

.selectWrap{ position: relative; display: block; }

select{
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 100%;
  padding: 10px 40px 10px 10px;
  border-radius: 12px;
  border: 1px solid var(--border2);
  background:
    linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)),
    var(--panel2);
  color: var(--text);
  font-size: 14px;
  outline: none;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
  -webkit-text-fill-color: var(--text);
}
select::-ms-expand { display: none; }
select.customArrow,
select{
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%236fe4ff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-size:18px 18px;
}
select:focus{
  border-color: rgba(111,228,255,.55);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.03),
    0 0 0 4px var(--glow2);
}
select option{
  background: linear-gradient(180deg, var(--panel2), var(--panel));
  color: var(--text);
  padding: 6px 10px;
}
select option:checked,
select option:active,
select option:hover,
select option:focus{
  background: linear-gradient(180deg, rgba(111,228,255,.04), rgba(111,228,255,.02));
  color: var(--text);
}
select optgroup { color: var(--muted); background: var(--panel); padding: 6px 10px; }

@media (hover: hover) { select option { color: var(--text); } }

/* Grid utility */
.row{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }

.muted{ color:var(--muted); }
.kbd{ font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,"Liberation Mono","Courier New", monospace; font-size:12px; }

.sep{ height:1px; background:var(--border2); margin:12px 0; }

/* ==============================
   Layout principal
   ============================== */

main{
  max-width:1200px;
  width:100%;
  margin:0 auto;
  padding:16px;
  display:grid;
  grid-template-columns:340px 1fr;
  gap:14px;
}
@media (max-width: 980px){ main{ grid-template-columns:1fr; } }

/* ==============================
   Cartes
   ============================== */

.card{
  background:var(--panel);
  border:1px solid rgba(111,228,255,.14);
  border-radius:var(--radius);
  overflow:hidden;
  box-shadow:var(--shadow2);
  position:relative;
  clip-path:polygon(
    10px 0%,
    100% 0%,
    100% calc(100% - 10px),
    calc(100% - 10px) 100%,
    0% 100%,
    0% 10px
  );
}
.card::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:linear-gradient(135deg, rgba(111,228,255,.10), transparent 40%, rgba(255,255,255,.03));
  opacity:.55;
}
.card::after{
  content:"";
  position:absolute;
  inset:1px;
  pointer-events:none;
  clip-path:inherit;
  border:1px solid rgba(111,228,255,.14);
  opacity:.9;
}
.card:hover{
  border-color:rgba(111,228,255,.28);
  box-shadow:
    0 0 0 3px rgba(111,228,255,.10),
    var(--shadow2);
}
.card .hd{ padding:12px 14px; border-bottom:1px solid rgba(255,255,255,.06); font-weight:900; letter-spacing:.10em; text-transform:uppercase; }
.card .bd{ padding:12px 14px; }

/* ==============================
   Timeline
   ============================== */

#timeline{ display:grid; gap:10px; }
.event{ display:block; }
.evt{
  display:grid;
  grid-template-columns:1fr 110px;
  gap:10px;
  align-items:stretch;
  cursor:pointer;
  transition:transform .14s ease, box-shadow .14s ease, border-color .14s ease;
}
.evt:hover{ transform:translateY(-1px); }
.evt:hover .title{ color:var(--accent); }
@media (max-width: 600px){ .evt{ grid-template-columns:1fr; } }
.evtMain{ padding:12px; }
.date{ font-size:12px; color:var(--muted); }
.title{ font-size:16px; font-weight:900; margin:6px 0; }
.cat{ display:flex; gap:8px; align-items:center; color:var(--muted); font-size:12px; }
.dot{ width:10px; height:10px; border-radius:999px; background:var(--accent); }
.preview{ margin-top:8px; font-size:13px; line-height:1.4; color:rgba(215,240,255,.90); }

.evtThumb{
  border-radius:14px;
  overflow:hidden;
  border:1px solid rgba(111,228,255,.18);
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  display:flex;
  align-items:center;
  justify-content:center;
}
.evtThumb.empty{ opacity:.5; }
.evtThumb img{ width:100%; height:100%; object-fit:cover; display:block; }
.evt:hover .evtThumb{ border-color:rgba(111,228,255,.30); box-shadow:0 0 0 3px rgba(111,228,255,.10); }

/* ==============================
   Modale
   ============================== */

#backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  display:none;
  z-index:100;
}

#modal{
  position:fixed;
  left:50%;
  top:50%;
  transform: translate(-50%,-50%);
  width:min(980px,94vw);
  height: 96vh;
  max-height:96vh;
  display:none;
  grid-template-columns:1fr;
  gap:0;
  z-index:101;
  background:var(--panel);
  border:1px solid rgba(111,228,255,.22);
  border-radius:20px;
  overflow:hidden;
  box-shadow:var(--shadow);
}
#modal::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:linear-gradient(180deg, rgba(111,228,255,.10), transparent 25%, rgba(0,0,0,0));
}

.mLeft{
  padding: 0 14px 14px;
  border-right:none;
  max-height:none;
  height: 100%;
  overflow:auto;
  overscroll-behavior:contain;
  -webkit-overflow-scrolling:touch;
}
.mTop{
  position: sticky;
  top: 0;
  z-index: 2;
  display:flex;
  gap:8px;
  align-items:flex-start;
  justify-content:space-between;
  background: linear-gradient(180deg, rgba(7,27,36,.94), rgba(7,27,36,.70));
  margin: 8px -14px 6px;
  padding: 0px 14px 6px;
  border-bottom: 1px solid rgba(255,255,255,.06);
}
.mTitle{ font-size:16px; line-height:1.2; font-weight:900; }
#mdate{ font-size:11px; line-height:1.2; margin-bottom:2px; }
#closeBtn{ padding:7px 10px; border-radius:10px; font-size:12px; }
.mActions{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
.mCat{ display:flex; gap:8px; align-items:center; color:var(--muted); margin-top:8px; }
#mlinks{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
#mtext{ margin-top:12px; white-space:pre-wrap; line-height:1.5; }
#mgallery{ margin-top:14px; display:grid; grid-template-columns:repeat(2,1fr); gap:10px; }
.thumb{ border:1px solid rgba(111,228,255,.14); border-radius:14px; overflow:hidden; background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01)); }
.thumb img{ width:100%; height:160px; object-fit:cover; display:block; }
.thumb .cap{ padding:8px; color:var(--muted); font-size:12px; }

#editWrap{ display:none; }

/* Fix scroll modale */
#modal{ clip-path:none !important; }
#modal::after{ content:none !important; }
body.modal-open{ overflow:hidden; }

/* ==============================
   Barre statut Supabase (edit only)
   ============================== */

#topStatus{
  z-index: 1;
  margin: 10px 0 0;
  width: 100%;
  padding:10px 12px;
  border-radius:14px;
  background:linear-gradient(180deg, rgba(6,14,20,.92), rgba(6,14,20,.75));
  border:1px solid rgba(111,228,255,.22);
  box-shadow:0 18px 60px rgba(0,0,0,.55);
  color:var(--text);
  font-size:12px;
  letter-spacing:.02em;
  display:none;
}
#topStatus.show{ display:block; }
#topStatus .row{ display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
#topStatus .msg{
  color:rgba(215,240,255,.92);
  white-space: normal;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  flex: 1 1 0;
  min-width: 0;
}
#topStatus .tag{
  flex:0 0 auto;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  color:var(--muted);
  text-transform:uppercase;
  font-size:11px;
}
#topStatus.ok{ border-color:rgba(111,228,255,.35); }
#topStatus.err{ border-color:rgba(255,80,80,.35); }

body[data-mode="edit"] #modal{ height: 98vh; max-height: 98vh; }
body[data-mode="edit"] .mLeft{ height: 100%; max-height: none; }

@media (min-width: 981px){
  .sidebar{
    position: sticky;
    top: 90px;
    align-self: start;
    max-height: calc(100vh - 90px);
    overflow-y: auto;
    overflow-x: hidden;
    display: grid;
    gap: 12px;
  }
}
.sidebar #topStatus{ margin: 0; width: 100%; }
